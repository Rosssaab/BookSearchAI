{% extends "base.html" %}

{% block title %}AI Book Search{% endblock %}

{% block content %}
<main class="container mt-4">
    <div id="searchAreaWrapper" class="row justify-content-center">
        <div id="searchArea" class="col-12 col-md-8 col-lg-6">
            <form id="searchForm">
                <div class="mb-3">
                    <label for="authorInput" class="form-label">Author:</label>
                    <input type="text" class="form-control" id="authorInput" name="author" placeholder="Enter author name (optional)">
                </div>
                <div class="mb-3">
                    <label for="titleInput" class="form-label">Title Contains:</label>
                    <input type="text" class="form-control" id="titleInput" name="title" placeholder="Enter part of the title (optional)">
                </div>
                <div class="mb-3">
                    <label for="subjectInput" class="form-label">Subject:</label>
                    <input type="text" class="form-control" id="subjectInput" name="subject" placeholder="Enter subject (optional)">
                </div>
                <div class="text-center mt-3">
                    <button type="submit" id="searchButton" class="btn btn-primary">Search</button>
                </div>
            </form>
        </div>
    </div>
    <div id="results" class="mt-4"></div>

    <button id="expandButton" class="btn btn-primary" style="display: none;">
        <i class="fas fa-search"></i> New Search
    </button>

    <!-- Searching Modal -->
    <div id="searchingModal" class="modal">
        <div class="modal-content">
            <img src="{{ url_for('static', filename='wait.gif') }}" alt="Searching..." class="searching-gif">
            <!-- Fallback SVG spinner -->
            <svg class="searching-gif" viewBox="0 0 50 50" style="display: none;">
                <circle cx="25" cy="25" r="20" fill="none" stroke="#000" stroke-width="5"></circle>
            </svg>
            <p>Searching...</p>
        </div>
    </div>

    <!-- Image Modal -->
    <div id="imageModal" class="modal">
        <div class="modal-content">
            <img id="modalImage" src="" alt="Book Cover">
            <a id="buyButton" href="#" target="_blank" class="btn btn-primary btn-lg">Buy</a>
        </div>
    </div>
</main>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/script.js') }}"></script>
{% endblock %}